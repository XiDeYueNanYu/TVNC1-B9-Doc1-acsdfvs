<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>学习越南语请联系Wx:XiDeYueNanYu</title>
    <style>
        body {
            background-color: #f7fbf3;
            margin-bottom: 60px;
        }
        #infoBox { 
            width: 100%; 
            max-width: 700px;
            height: 100px; 
            margin: 0 auto; 
            border: 1px solid #ccc; 
            background: #68838B; 
            color: #D2B48C; 
            display: flex; 
            align-items: center; 
            justify-content: center; 
            font-size: clamp(40px, 5vw, 60px);
            font-weight: bold;
        }
        #contactBox { 
            width: 100%; 
            max-width: 700px;
            height: 45px; 
            margin: 0px auto; 
            border: 1px solid #ccc; 
            background: #68838B; 
            color: #D2B48C; 
            display: flex; 
            align-items: center; 
            justify-content: left; 
            padding-left: 20px;
            font-size: clamp(12px, 2vw, 15px); 
            font-weight: bold;
        }
        .image-frame {
            max-width: 700px;
            margin: 20px auto 0 auto;
            border: 10px solid #957652;
            border-radius: 10px;
            background-color: #ffffff;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
            display: none;
            overflow: hidden;
        }
        .image-frame img {
            width: 100%;
            height: auto;
            display: block;
        }
        .content-box {
            max-width: 700px;
            margin: 20px auto;
            padding: 50px;
            border: 10px solid #957652;
            border-radius: 10px;
            background-color: #ffffff;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
            font-size: 30px;
            font-family: Arial;
            color: #222322;
            line-height: 3;
            text-align: justify;
        }
        .translated-word {
            position: relative;
            display: inline-block;
            white-space: nowrap;
            line-height: 1.3;
            background-color: #bfcdbf;
            color: #000000;
            padding: 4px 4px;
            border-radius: 2px;
        }
        .translation {
            position: absolute;
            top: -29px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 18px;
            background-color: #eddabc;
            color: #313a2d;
            padding: 4px 4px;
            border-radius: 1px;
            white-space: nowrap;
            z-index: 1;
            line-height: 1;
        }
        .original {
            display: inline;
            line-height: 1;
        }
        .floating-controls {
            position: fixed;
            top: 20px;
            right: 20px;
            background-color: #f0f0f0;
            padding: 10px;
            border-radius: 5px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
            text-align: center;
            display: block;
            z-index: 1000;
        }
        #audioPlayer {
            width: 100%;
            margin-bottom: 10px;
        }
        .time-row {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 10px;
            margin-bottom: 10px;
        }
        .time-box-group {
            display: flex;
            justify-content: center;
            gap: 10px;
        }
        .button-group {
            display: flex;
            justify-content: center;
            gap: 10px;
        }
        .floating-controls p#timeDisplay {
            font-size: 28px;
            color: #FFFFFF;
            background-color: #000000;
            padding: 5px 10px;
            border-radius: 5px;
            cursor: pointer;
            margin: 0;
        }
        .floating-controls .time-box {
            font-size: 16px;
            color: #FFFFFF;
            background-color: #555555;
            padding: 5px 10px;
            border-radius: 5px;
            min-width: 60px;
        }
        .tua-buttons {
            display: flex;
            justify-content: center;
            gap: 5px;
            margin-bottom: 10px;
            flex-wrap: wrap;
        }
        .action-buttons {
            display: flex;
            justify-content: center;
            gap: 10px;
        }
        .control-button {
            width: 50px;
            height: 50px;
            background-color: #363535;
            color: white;
            border: none;
            border-radius: 50%;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            display: inline-flex;
            justify-content: center;
            align-items: center;
        }
        .control-button:disabled {
            background-color: #888888;
            cursor: not-allowed;
        }
        .control-button:hover:not(:disabled) {
            background-color: #000000;
        }
        .pause-play-button {
            background-color: #FF4500;
        }
        .pause-play-button:hover {
            background-color: #CC3700;
        }
        .toggle-button {
            background-color: #4682B4;
        }
        .toggle-button:hover {
            background-color: #36648B;
        }
        .loop-button {
            background-color: #3c923c;
        }
        .loop-button:hover {
            background-color: #347d34;
        }
        .clear-button {
            background-color: #bc3f13;
        }
        .clear-button:hover {
            background-color: #d15124;
        }
        .active {
            background-color: #ffffff; 
            border-radius: 5px;
        }
        #quizContainer {
            display: none;
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 20px auto;
            padding: 20px;
            color: #53686f;
            font-size: 25px;
            font-weight: bold;
        }
        .question {
            margin-bottom: 20px;
            padding: 18px;
            color: #53686f;
            border: 5px solid #53686f;
            border-radius: 10px;
            background-color: #ffffff;
            font-size: 20px;
            font-weight: bold;
        }
        .options label {
            display: block;
            margin: 15px 0;
            cursor: pointer;
            color: #21292c;
            font-size: 16px;
            font-weight: bold;
        }
        #result {
            margin-top: 20px;
            padding: 10px;
            display: none;
            border: 5px solid #53686f;
            border-radius: 5px;
            font-size: 16px;
            font-weight: bold;
            background-color: #ffffff;
            color: #007a33;
        }
        .wrong-answer {
            color: #f65936;
            margin: 10px 0;
            font-size: 16px;
            font-weight: bold;
        }
        #submitQuiz {
            font-family: Arial, sans-serif;
            padding: 10px 20px;
            border: 3px solid #53686f;
            background-color: #FF6820;
            border-radius: 5px;
            color: white;
            cursor: pointer;
            font-size: 18px;
            font-weight: bold;
        }
        #submitQuiz:hover {
            background-color: #ff844a;
        }
        #vocabContainer {
            display: none;
            max-width: 700px;
            margin: 20px auto;
            padding: 20px;
            font-family: Arial, sans-serif;
        }
        #vocabControls {
            position: fixed;
            bottom: 60px;
            left: 50%;
            transform: translateX(-50%);
            width: 900px;
            background: #68838B;
            padding: 10px 0;
            box-shadow: 0 -2px 5px rgba(0, 0, 0, 0.2);
            z-index: 1000;
            margin-bottom: 10px;
        }
        #vocabControls div {
            margin: 5px 0;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        #vocabControls button {
            padding: 8px 8px;
            margin: 0 5px;
            cursor: pointer;
            border: 3px solid #5d757d;
            background: #0f1314;
            color: #fffbef;
            font-size: 28px;
            border-radius: 5px;
        }
        #sentenceNumber {
            width: 50px;
            padding: 10px;
            text-align: center;
            border: 3px solid #68838B;
            background: #FFAD5B;
            color: #000;
            border-radius: 10px;
            font-size: 16px;
            -moz-appearance: textfield;
        }
        #sentenceNumber::-webkit-inner-spin-button, 
        #sentenceNumber::-webkit-outer-spin-button {
            -webkit-appearance: none;
            margin: 0;
        }
        #sentenceNumber:disabled {
            background: #eee;
        }
        .disabled {
            cursor: not-allowed;
            pointer-events: none;
        }
        .active-mode {
            border: 4px solid orange;
        }
        #vocabIndicator {
            width: 95%;
            max-width: 700px;
            min-height: 50px;
            margin: 10px auto;
            padding: 5px;
            border: 3px solid #734A2E;
            background: #ffffe0;
            border-radius: 10px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }
        #vocabOptionsContainer {
            width: 100%;
            max-width: 700px;
            margin: 10px auto;
        }
        .optionBtn {
            width: 95%;
            max-width: 700px;
            padding: 10px;
            margin: 5px 0;
            border: 1px solid #734A2E;
            background: #ffffff;
            color: #000;
            font-size: 30px;
            text-align: left;
            cursor: pointer;
            border-radius: 5px;
        }
        .optionBtn:hover {
            background: #D2E4C4;
        }
        .correct {
            background: #B7D7AA !important;
        }
        .wrong {
            background: #CE6D5E !important;
        }
        .floating-mode-bar {
            position: fixed;
            bottom: 0px;
            left: 50%;
            transform: translateX(-50%);
            background-color: #68838B;
            padding: 10px;
            border-radius: 5px;
            box-shadow: 0 0px 5px rgba(0, 0, 0, 1);
            display: flex;
            justify-content: center;
            gap: 20px;
            z-index: 1000;
            width: 900px;
        }
        .mode-button {
            padding: 10px 20px;
            border: 0px solid #ccc;
            background: #95a8ad;
            color: #293437;
            font-size: 20px;
            font-weight: bold;
            cursor: pointer;
            border-radius: 5px;
            transition: border-color 0.3s;
        }
        .mode-button.active {
            border: 2px solid #ffffff;
            background: #f0f0f0;
            color: #293437;
        }
        @media (max-width: 768px) { 
            body {
                margin-bottom: 200px;
            }
            #infoBox { 
                width: 90%; 
                height: 120px; 
                font-size: clamp(30px, 4vw, 40px);
            }
            #contactBox { 
                width: 90%; 
                height: 50px; 
                font-size: clamp(14px, 2vw, 16px);
            }
            .image-frame {
                width: 90%;
                margin: 10px auto 0 auto;
            }
            .content-box {
                margin: 10px auto;
                padding: 20px;
                padding-top: 50px;
                padding-bottom: 90px;
                font-size: 19px;
                line-height: 3.5;
            }
            .translated-word {
                padding: 3px 3px;
            }
            .translation {
                top: -25px;
                font-size: 13px;
            }
            .floating-controls {
                top: 10px;
                right: 10px;
                padding: 5px;
            }
            #vocabControls {
                width: 100%;
                bottom: 50px;
                padding: 5px 0;
            }
            #vocabControls button {
                padding: 6px 6px;
                font-size: 20px;
            }
            #sentenceNumber {
                width: 40px;
                padding: 8px;
                font-size: 14px;
            }
            #vocabIndicator {
                min-height: 40px;
            }
            .optionBtn {
                font-size: 20px;
                padding: 8px;
            }
            .floating-mode-bar {
                width: 100%;
            }
        }
        @media (max-width: 400px) {
            .control-button {
                width: 40px;
                height: 40px;
                font-size: 14px;
            }
            .floating-controls p#timeDisplay {
                font-size: 20px;
            }
            .floating-controls .time-box {
                font-size: 12px;
                min-width: 50px;
            }
        }
    </style>
</head>
<body>
    <div id="infoBox">习得越南语</div>
    <div id="contactBox">讲师-阮玉煌 | Weixin：XiDeYueNanYu</div>
    <div id="contentContainer">
        <div class="image-frame" id="imageFrame">
            <img id="contentImage" src="anhminhhoa.jpg" alt="Content Image">
        </div>
        <div class="content-box" id="content"></div>
    </div>
    <div id="quizContainer">
        <h1>回答下面问题</h1>
        <form id="quizForm">
            <div id="questions"></div>
            <button type="button" id="submitQuiz" onclick="checkAnswers()">提交</button>
        </form>
        <div id="result"></div>
    </div>
    <div id="vocabContainer">
        <div id="vocabIndicator"></div>
        <div id="vocabOptionsContainer"></div>
    </div>
    <div class="floating-controls" id="floatingControls">
        <audio id="audioPlayer" src="lesson.mp3" controls></audio>
        <div class="time-row">
            <p id="timeDisplay">00:00</p>
            <div class="time-box-group">
                <span class="time-box" id="loopStart">--:--</span>
                <span class="time-box" id="loopEnd">--:--</span>
            </div>
            <div class="button-group">
                <button class="control-button loop-button" id="loopButton">听</button>
                <button class="control-button clear-button" id="clearButton">删</button>
            </div>
        </div>
        <div class="tua-buttons">
            <button class="control-button" id="rewind5sButton">-5s</button>
            <button class="control-button" id="rewind1sButton">-1s</button>
            <button class="control-button" id="forward1sButton">+1s</button>
            <button class="control-button" id="forward5sButton">+5s</button>
        </div>
        <div class="action-buttons">
            <button class="control-button pause-play-button" id="pausePlayButton">播</button>
            <button class="control-button toggle-button" id="toggleControlsButton">藏</button>
        </div>
    </div>
    <div id="vocabControls">
        <div>
            <button id="prevBtn">◀</button>
            <input type="text" id="sentenceNumber" inputmode="numeric" pattern="[0-9]*">
            <button id="nextBtn">▶</button>
        </div>
        <div>
            <button id="showHideBtn" class="active-mode">显示-隐藏</button>
            <button id="replayBtn">再听一遍</button>
        </div>
    </div>
    <div class="floating-mode-bar">
        <button class="mode-button active" id="contentMode">内容</button>
        <button class="mode-button" id="quizMode">回答问题</button>
        <button class="mode-button" id="vocabMode">词汇</button>
    </div>

    <audio id="vocabAudio" src="audio.mp3"></audio>
    <audio id="correctAudio" src="Dung.mp3"></audio>
    <audio id="wrongAudio" src="Sai.mp3"></audio>

    <script>

const textContentData = [
    `BẠN TÔI
Tôi có một người bạn thân tên là Lam. Gia đình Lam ở nông thôn. Nhà Lam đông anh em, bố mẹ đều là nông dân, nên rất nghèo. Lam học đại học ở Hà Nội.
Ngoài giờ học ở trường, Lam còn phải đi làm thêm để kiếm tiền trả học phí. Hàng ngày, Lam thường dậy lúc 5 giờ sáng để học bài. Sau buổi học, khi chúng tôi chơi bóng, thì Lam đi dạy thêm. Những ngày nghỉ, khi chúng tôi còn đang ngủ, thì Lam đã chuẩn bị đi làm thêm ở nhà hàng. Thỉnh thoảng Lam mới có thời gian chơi bóng với chúng tôi.
Lam thích bóng đá và chơi bóng rất giỏi. Lam mê cầu thủ bóng đá Beckham và luôn sưu tập ảnh về cầu thủ này. Lam thường nói với tôi:
“Nếu Beckham đến Việt Nam, thế nào mình cũng đến gặp để xin chữ ký của cầu thủ nổi tiếng thế giới này.” 
Tôi mong ước mơ này của Lam sẽ trở thành sự thật. Và tôi cũng mong sau này Lam kiếm được việc làm tốt để giúp đỡ gia đình. Nếu Lam tìm được việc làm tốt, cuộc sống của Lam và gia đình sẽ trở nên tốt đẹp hơn.`
];
const dictionary = {
    "bạn": "朋友",
    "thân": "亲密",
    "gia đình": "家庭",
    "nông thôn": "农村",
    "đông": "多",
    "anh em": "兄弟姐妹",
    "bố mẹ": "父母",
    "nông dân": "农民",
    "nghèo": "贫穷",
    "học": "学习",
    "đại học": "大学",
    "Hà Nội": "河内",
    "làm thêm": "兼职",
    "kiếm tiền": "赚钱",
    "học phí": "学费",
    "hàng ngày": "每天",
    "dậy": "起床",
    "sáng": "早上",
    "học bài": "学习",
    "chơi bóng": "踢球",
    "dạy thêm": "家教",
    "ngày nghỉ": "休息日",
    "ngủ": "睡觉",
    "chuẩn bị": "准备",
    "nhà hàng": "餐厅",
    "thỉnh thoảng": "偶尔",
    "thời gian": "时间",
    "thích": "喜欢",
    "bóng đá": "足球",
    "giỏi": "厉害",
    "mê": "迷恋",
    "cầu thủ": "球员",
    "sưu tập": "收集",
    "ảnh": "照片",
    "nói": "说",
    "nếu": "如果",
    "đến": "到",
    "gặp": "见面",
    "xin": "请求",
    "chữ ký": "签名",
    "nổi tiếng": "著名",
    "thế giới": "世界",
    "mong": "希望",
    "ước mơ": "梦想",
    "sự thật": "现实",
    "việc làm": "工作",
    "tốt": "好",
    "giúp đỡ": "帮助",
    "cuộc sống": "生活",
    "tốt đẹp": "美好"
};
const quizData = [
    {
        question: "Theo bài đọc, lý do nào khiến Lam phải đi làm thêm khi đang học đại học?",
        options: ["Vì muốn có thêm kinh nghiệm sống", "Vì cần trang trải học phí do gia đình nghèo", "Vì muốn giúp đỡ bạn bè cùng lớp", "Vì thích tự lập và không muốn sống dựa vào gia đình"],
        correct: "Vì cần trang trải học phí do gia đình nghèo"
    },
    {
        question: "Câu nào dưới đây mô tả đúng nhất lịch sinh hoạt hằng ngày của Lam?",
        options: ["Học xong là nghỉ ngơi hoàn toàn", "Thức khuya dậy muộn để học bài và làm thêm", "Dậy sớm học bài, đi học, làm thêm và ít thời gian giải trí", "Chỉ làm thêm vào dịp lễ tết để kiếm thêm tiền tiêu"],
        correct: "Dậy sớm học bài, đi học, làm thêm và ít thời gian giải trí"
    },
    {
        question: "Theo bài, Lam thường làm gì khi các bạn chơi bóng sau giờ học?",
        options: ["Về nhà nấu ăn", "Đến thư viện học bài", "Ngủ trưa lấy sức cho ca tối", "Đi dạy thêm để kiếm tiền"],
        correct: "Đi dạy thêm để kiếm tiền"
    },
    {
        question: "Điều gì cho thấy Lam là người có tinh thần vượt khó?",
        options: ["Làm nhiều nghề vì muốn có cuộc sống sung túc", "Vẫn đam mê thể thao dù bận rộn", "Vừa học tốt, vừa làm thêm để tự lo chi phí học tập", "Sưu tập ảnh để giải trí sau giờ học"],
        correct: "Vừa học tốt, vừa làm thêm để tự lo chi phí học tập"
    },
    {
        question: "Câu “Lam thường nói với tôi: 'Nếu Beckham đến Việt Nam, thế nào mình cũng đến gặp để xin chữ ký…'” cho thấy điều gì?",
        options: ["Lam có khả năng ngoại giao tốt", "Lam đặt mục tiêu rõ ràng trong học tập", "Lam là người mơ mộng và ít thực tế", "Lam có niềm yêu thích đặc biệt với bóng đá và thần tượng của mình"],
        correct: "Lam có niềm yêu thích đặc biệt với bóng đá và thần tượng của mình"
    },
    {
        question: "Theo bài, Lam có thời gian chơi bóng đá với bạn bè khi nào?",
        options: ["Mỗi buổi sáng sớm", "Thỉnh thoảng mới có vì rất bận rộn", "Mỗi cuối tuần đều chơi cùng bạn", "Mỗi tối sau khi làm thêm"],
        correct: "Thỉnh thoảng mới có vì rất bận rộn"
    },
    {
        question: "Người kể chuyện mong điều gì cho tương lai của Lam?",
        options: ["Được gặp Beckham và trở thành cầu thủ chuyên nghiệp", "Có thể tiếp tục sống ở thành phố", "Kiếm được việc làm tốt để cải thiện cuộc sống", "Mở nhà hàng riêng ở Hà Nội"],
        correct: "Kiếm được việc làm tốt để cải thiện cuộc sống"
    },
    {
        question: "Câu “Tôi mong ước mơ này của Lam sẽ trở thành sự thật” ám chỉ điều gì?",
        options: ["Mong Lam đạt học bổng", "Mong Lam được gặp Beckham", "Mong Lam chuyển ngành học yêu thích", "Mong Lam trở thành giáo viên"],
        correct: "Mong Lam được gặp Beckham"
    },
    {
        question: "Thái độ của người kể chuyện đối với Lam là gì?",
        options: ["Ghen tị với sự nỗ lực của Lam", "Đồng cảm và khâm phục bạn mình", "Lạnh nhạt và chỉ kể lại sự việc", "Phê phán việc làm thêm quá nhiều"],
        correct: "Đồng cảm và khâm phục bạn mình"
    },
    {
        question: "Có thể suy ra gì từ việc Lam dậy lúc 5 giờ sáng để học bài?",
        options: ["Lam có thói quen dậy sớm từ nhỏ", "Lam không thể học vào buổi tối", "Lam tranh thủ thời gian vì lịch làm việc dày đặc", "Lam cần dậy sớm để làm việc nhà cho chủ trọ"],
        correct: "Lam tranh thủ thời gian vì lịch làm việc dày đặc"
    },
    {
        question: "Dựa vào bài, đâu là điểm tương phản giữa Lam và các bạn cùng lớp?",
        options: ["Các bạn học giỏi hơn Lam", "Lam có nhiều thời gian giải trí hơn", "Các bạn được bố mẹ chu cấp đầy đủ, còn Lam phải tự lo", "Lam sống ở Hà Nội, còn các bạn sống ở ký túc xá"],
        correct: "Các bạn được bố mẹ chu cấp đầy đủ, còn Lam phải tự lo"
    },
    {
        question: "Mục đích chính của bài viết là gì?",
        options: ["Tường thuật lại một trận bóng đá của Lam", "Giới thiệu một người bạn đặc biệt có nghị lực sống", "Phân tích khó khăn của sinh viên nông thôn", "Nêu lên tầm quan trọng của học và làm thêm"],
        correct: "Giới thiệu một người bạn đặc biệt có nghị lực sống"
    }
];
const sentences = [
    {
        "audioFile": "audio.mp3",
        "start": 0.23483,
        "end": 1.26483,
        "correctAnswer": "thỉnh thoảng",
        "translation": "偶尔",
        "options": [
            "thỉnh thoáng",
            "thịnh thoảng",
            "thỉnh thoảng",
            "thình thoảng"
        ]
    },
    {
        "audioFile": "audio.mp3",
        "start": 1.65483,
        "end": 2.51483,
        "correctAnswer": "chơi bóng",
        "translation": "踢球",
        "options": [
            "chới bóng",
            "chơi bõng",
            "chơi bóng",
            "chời bóng"
        ]
    },
    {
        "audioFile": "audio.mp3",
        "start": 3.11483,
        "end": 4.18483,
        "correctAnswer": "cuộc sống",
        "translation": "生活",
        "options": [
            "cuộc xống",
            "cuộc sổng",
            "cuộc sống",
            "cuốc sống"
        ]
    },
    {
        "audioFile": "audio.mp3",
        "start": 4.52483,
        "end": 5.54483,
        "correctAnswer": "hàng ngày",
        "translation": "每天",
        "options": [
            "hảng ngày",
            "hàng ngảy",
            "hàng ngày",
            "hàng ngài"
        ]
    },
    {
        "audioFile": "audio.mp3",
        "start": 5.97483,
        "end": 7.02483,
        "correctAnswer": "kiếm tiền",
        "translation": "赚钱",
        "options": [
            "kiếm tiên",
            "khiếm tiền",
            "kiếm tiền",
            "kiềm tiền"
        ]
    },
    {
        "audioFile": "audio.mp3",
        "start": 7.41483,
        "end": 8.52483,
        "correctAnswer": "ngày nghỉ",
        "translation": "休息日",
        "options": [
            "ngày nghĩ",
            "ngáy nghỉ",
            "ngảy nghỉ",
            "ngày nghỉ"
        ]
    },
    {
        "audioFile": "audio.mp3",
        "start": 8.95483,
        "end": 10.06483,
        "correctAnswer": "nông thôn",
        "translation": "农村",
        "options": [
            "nông thon",
            "nông thôn",
            "nong thôn",
            "nôm thôn"
        ]
    },
    {
        "audioFile": "audio.mp3",
        "start": 10.44483,
        "end": 11.64483,
        "correctAnswer": "nổi tiếng",
        "translation": "著名",
        "options": [
            "nổi tiếng",
            "nỗi tiếng",
            "nọi tiếng",
            "nổ tiếng"
        ]
    },
    {
        "audioFile": "audio.mp3",
        "start": 12.02483,
        "end": 13.08483,
        "correctAnswer": "thời gian",
        "translation": "时间",
        "options": [
            "thơi gian",
            "thời giàn",
            "thời gian",
            "thời giang"
        ]
    },
    {
        "audioFile": "audio.mp3",
        "start": 13.45483,
        "end": 14.44483,
        "correctAnswer": "chuẩn bị",
        "translation": "准备",
        "options": [
            "chuẩm bị",
            "chuẩn bĩ",
            "chuổn bị",
            "chuẩn bị"
        ]
    },
    {
        "audioFile": "audio.mp3",
        "start": 14.80483,
        "end": 15.99483,
        "correctAnswer": "dạy thêm",
        "translation": "家教",
        "options": [
            "dậy thêm",
            "dạy thềm",
            "dạy thêm",
            "dại thêm"
        ]
    },
    {
        "audioFile": "audio.mp3",
        "start": 16.43483,
        "end": 17.45483,
        "correctAnswer": "gia đình",
        "translation": "家庭",
        "options": [
            "gia đỉnh",
            "da đình",
            "gia đình",
            "già đình"
        ]
    },
    {
        "audioFile": "audio.mp3",
        "start": 17.93483,
        "end": 19.06483,
        "correctAnswer": "làm thêm",
        "translation": "兼职",
        "options": [
            "lầm thêm",
            "làm thềm",
            "làm thêm",
            "lam thêm"
        ]
    },
    {
        "audioFile": "audio.mp3",
        "start": 19.46483,
        "end": 20.56483,
        "correctAnswer": "nhà hàng",
        "translation": "餐厅",
        "options": [
            "nhà hảng",
            "nhá hàng",
            "nhà hàng",
            "nhà hàn"
        ]
    },
    {
        "audioFile": "audio.mp3",
        "start": 21.10483,
        "end": 22.19483,
        "correctAnswer": "nông dân",
        "translation": "农民",
        "options": [
            "nông dăn",
            "nông giân",
            "nông dân",
            "nôm dân"
        ]
    },
    {
        "audioFile": "audio.mp3",
        "start": 22.69483,
        "end": 23.76483,
        "correctAnswer": "thế giới",
        "translation": "世界",
        "options": [
            "thế dới",
            "thề giới",
            "thế giới",
            "thễ giới"
        ]
    },
    {
        "audioFile": "audio.mp3",
        "start": 24.37483,
        "end": 25.43483,
        "correctAnswer": "việc làm",
        "translation": "工作",
        "options": [
            "việt làm",
            "việc làn",
            "việc làm",
            "viếc làm"
        ]
    },
    {
        "audioFile": "audio.mp3",
        "start": 26.01483,
        "end": 27.05483,
        "correctAnswer": "bóng đá",
        "translation": "足球",
        "options": [
            "bóng đã",
            "bóc đá",
            "bóng đá",
            "bõng đá"
        ]
    },
    {
        "audioFile": "audio.mp3",
        "start": 27.58483,
        "end": 28.62483,
        "correctAnswer": "cầu thủ",
        "translation": "球员",
        "options": [
            "cầu thử",
            "câu thủ",
            "cầu thủ",
            "cầu thú"
        ]
    },
    {
        "audioFile": "audio.mp3",
        "start": 29.25483,
        "end": 30.29483,
        "correctAnswer": "giúp đỡ",
        "translation": "帮助",
        "options": [
            "giúp đở",
            "giụp đỡ",
            "giúp đỡ",
            "giúp đợ"
        ]
    },
    {
        "audioFile": "audio.mp3",
        "start": 30.71483,
        "end": 31.73483,
        "correctAnswer": "học bài",
        "translation": "学习",
        "options": [
            "học bày",
            "hộc bài",
            "học bài",
            "học bại"
        ]
    },
    {
        "audioFile": "audio.mp3",
        "start": 32.13483,
        "end": 33.13483,
        "correctAnswer": "học phí",
        "translation": "学费",
        "options": [
            "học phí",
            "họp phí",
            "hộc phí",
            "học phỉ"
        ]
    },
    {
        "audioFile": "audio.mp3",
        "start": 33.64483,
        "end": 34.52483,
        "correctAnswer": "sưu tập",
        "translation": "收集",
        "options": [
            "sưu tạp",
            "sưu tập",
            "xưu tập",
            "sứu tập"
        ]
    },
    {
        "audioFile": "audio.mp3",
        "start": 35.20483,
        "end": 36.06483,
        "correctAnswer": "sự thật",
        "translation": "现实",
        "options": [
            "sự thậc",
            "sư thật",
            "sự thật",
            "sự thắt"
        ]
    },
    {
        "audioFile": "audio.mp3",
        "start": 36.57483,
        "end": 37.48483,
        "correctAnswer": "tốt đẹp",
        "translation": "美好",
        "options": [
            "tốt dẹp",
            "tốt đẹp",
            "tót đẹp",
            "tột đẹp"
        ]
    },
    {
        "audioFile": "audio.mp3",
        "start": 38.01483,
        "end": 38.94483,
        "correctAnswer": "đại học",
        "translation": "大学",
        "options": [
            "đai học",
            "đại hộc",
            "đại học",
            "đạy học"
        ]
    },
    {
        "audioFile": "audio.mp3",
        "start": 39.44483,
        "end": 40.41483,
        "correctAnswer": "Hà Nội",
        "translation": "河内",
        "options": [
            "Hà Nội",
            "Hà Nổi",
            "Hạ Nội",
            "Hả Nội"
        ]
    },
    {
        "audioFile": "audio.mp3",
        "start": 40.90483,
        "end": 41.94483,
        "correctAnswer": "anh em",
        "translation": "兄弟姐妹",
        "options": [
            "anh em",
            "anh êm",
            "ănh em",
            "anh ẻm"
        ]
    },
    {
        "audioFile": "audio.mp3",
        "start": 42.50483,
        "end": 43.57483,
        "correctAnswer": "chữ ký",
        "translation": "签名",
        "options": [
            "chữ kỷ",
            "chữ ký",
            "chự kỹ",
            "chử ký"
        ]
    },
    {
        "audioFile": "audio.mp3",
        "start": 44.13483,
        "end": 45.17483,
        "correctAnswer": "ước mơ",
        "translation": "梦想",
        "options": [
            "ước mơ",
            "ướt mơ",
            "ước mê",
            "ước mở"
        ]
    }
];

        // Xử lý hiển thị văn bản với từ điển
        const content = document.getElementById('content');
        function renderText() {
            let html = textContentData[0].replace(/\n/g, "<br>");
            const sortedKeys = Object.keys(dictionary).sort((a, b) => b.length - a.length);
            const replacements = [];

            sortedKeys.forEach(key => {
                const regex = new RegExp(`(\\b|[.,!?\\n\\s]|^)(${key.replace(/[.*+?^${}()|[\]\\]/g, '\\$&')})(\\b|[.,!?\\n\\s]|$)`, 'gi');
                let match;
                while ((match = regex.exec(html)) !== null) {
                    const start = match.index + match[1].length;
                    const end = start + match[2].length;
                    replacements.push({
                        start,
                        end,
                        original: match[2],
                        prefix: match[1],
                        suffix: match[3],
                        translation: dictionary[key]
                    });
                }
            });

            replacements.sort((a, b) => a.start - b.start);
            const filteredReplacements = [];
            let lastEnd = -1;
            for (const replacement of replacements) {
                if (replacement.start >= lastEnd) {
                    filteredReplacements.push(replacement);
                    lastEnd = replacement.end;
                }
            }

            for (let i = filteredReplacements.length - 1; i >= 0; i--) {
                const { start, end, original, prefix, suffix, translation } = filteredReplacements[i];
                const translatedHtml = `${prefix}<span class="translated-word"><span class="translation">${translation}</span><span class="original">${original}</span></span>${suffix}`;
                html = html.slice(0, start - prefix.length) + translatedHtml + html.slice(end + suffix.length);
            }

            content.innerHTML = html;
        }

        // Xử lý hiển thị ảnh
        const imageFrame = document.getElementById('imageFrame');
        const contentImage = document.getElementById('contentImage');
        const imageSrc = "anhminhhoa.jpg";
        function renderImage() {
            if (imageSrc) {
                contentImage.src = imageSrc;
                imageFrame.style.display = 'block';
            } else {
                imageFrame.style.display = 'none';
            }
        }

        // Xử lý audio và bảng điều khiển
        const audioPlayer = document.getElementById("audioPlayer");
        const floatingControls = document.getElementById("floatingControls");
        if (!floatingControls) {
            console.error('Không tìm thấy floatingControls');
        }
        const timeDisplay = floatingControls ? floatingControls.querySelector("#timeDisplay") : null;
        const loopStart = floatingControls ? floatingControls.querySelector("#loopStart") : null;
        const loopEnd = floatingControls ? floatingControls.querySelector("#loopEnd") : null;
        const loopButton = floatingControls ? floatingControls.querySelector("#loopButton") : null;
        const clearButton = floatingControls ? floatingControls.querySelector("#clearButton") : null;
        const rewind5sButton = floatingControls ? floatingControls.querySelector("#rewind5sButton") : null;
        const rewind1sButton = floatingControls ? floatingControls.querySelector("#rewind1sButton") : null;
        const forward1sButton = floatingControls ? floatingControls.querySelector("#forward1sButton") : null;
        const forward5sButton = floatingControls ? floatingControls.querySelector("#forward5sButton") : null;
        const pausePlayButton = floatingControls ? floatingControls.querySelector("#pausePlayButton") : null;
        const toggleControlsButton = floatingControls ? floatingControls.querySelector("#toggleControlsButton") : null;
        const tuaButtons = floatingControls ? floatingControls.querySelector(".tua-buttons") : null;

        function formatTime(seconds) {
            const minutes = Math.floor(seconds / 60);
            const secs = Math.floor(seconds % 60);
            return `${minutes.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;
        }

        function updateTimeDisplay(displayElement) {
            if (displayElement) {
                displayElement.textContent = formatTime(audioPlayer.currentTime);
            }
        }

        let customLoopStart = null;
        let customLoopEnd = null;
        let clickCount = 0;
        let isLooping = false;

        if (timeDisplay) {
            const updateInterval = setInterval(() => updateTimeDisplay(timeDisplay), 1000);
            timeDisplay.onclick = () => {
                if (audioPlayer.paused) {
                    clickCount++;
                    if (clickCount === 1) {
                        customLoopStart = audioPlayer.currentTime;
                        loopStart.textContent = formatTime(customLoopStart);
                    } else if (clickCount === 2) {
                        customLoopEnd = audioPlayer.currentTime;
                        if (customLoopEnd <= customLoopStart) {
                            customLoopEnd = null;
                            loopEnd.textContent = "--:--";
                        } else {
                            loopEnd.textContent = formatTime(customLoopEnd);
                        }
                        clickCount = 0;
                    }
                }
            };
        }

        if (audioPlayer) {
            audioPlayer.ontimeupdate = function() {
                updateTimeDisplay(timeDisplay);
                if (isLooping && customLoopStart !== null && customLoopEnd !== null) {
                    if (audioPlayer.currentTime >= customLoopEnd) {
                        audioPlayer.currentTime = customLoopStart;
                    }
                }
            };
        }

        if (rewind5sButton) {
            rewind5sButton.onclick = () => {
                if (!isLooping) {
                    audioPlayer.currentTime = Math.max(0, audioPlayer.currentTime - 5);
                    updateTimeDisplay(timeDisplay);
                }
            };
        }
        if (rewind1sButton) {
            rewind1sButton.onclick = () => {
                if (!isLooping) {
                    audioPlayer.currentTime = Math.max(0, audioPlayer.currentTime - 1);
                    updateTimeDisplay(timeDisplay);
                }
            };
        }
        if (forward1sButton) {
            forward1sButton.onclick = () => {
                if (!isLooping) {
                    audioPlayer.currentTime = Math.min(audioPlayer.duration, audioPlayer.currentTime + 1);
                    updateTimeDisplay(timeDisplay);
                }
            };
        }
        if (forward5sButton) {
            forward5sButton.onclick = () => {
                if (!isLooping) {
                    audioPlayer.currentTime = Math.min(audioPlayer.duration, audioPlayer.currentTime + 5);
                    updateTimeDisplay(timeDisplay);
                }
            };
        }

        if (pausePlayButton) {
            pausePlayButton.onclick = () => {
                if (audioPlayer.paused) {
                    audioPlayer.play();
                    pausePlayButton.textContent = "停";
                } else {
                    audioPlayer.pause();
                    pausePlayButton.textContent = "播";
                }
            };
        }

        if (loopButton) {
            loopButton.onclick = () => {
                if (customLoopStart !== null && customLoopEnd !== null) {
                    audioPlayer.currentTime = customLoopStart;
                    audioPlayer.play();
                    isLooping = true;
                    if (rewind5sButton) rewind5sButton.disabled = true;
                    if (rewind1sButton) rewind1sButton.disabled = true;
                    if (forward1sButton) forward1sButton.disabled = true;
                    if (forward5sButton) forward5sButton.disabled = true;
                }
            };
        }

        if (clearButton) {
            clearButton.onclick = () => {
                customLoopStart = null;
                customLoopEnd = null;
                if (loopStart) loopStart.textContent = "--:--";
                if (loopEnd) loopEnd.textContent = "--:--";
                clickCount = 0;
                isLooping = false;
                if (rewind5sButton) rewind5sButton.disabled = false;
                if (rewind1sButton) rewind1sButton.disabled = false;
                if (forward1sButton) forward1sButton.disabled = false;
                if (forward5sButton) forward5sButton.disabled = false;
            };
        }

        let controlsVisible = true;
        if (toggleControlsButton) {
            toggleControlsButton.onclick = () => {
                if (controlsVisible) {
                    if (timeDisplay) timeDisplay.style.display = "none";
                    if (tuaButtons) tuaButtons.style.display = "none";
                    if (pausePlayButton) pausePlayButton.style.display = "none";
                    if (loopStart) loopStart.style.display = "none";
                    if (loopEnd) loopEnd.style.display = "none";
                    if (loopButton) loopButton.style.display = "none";
                    if (clearButton) clearButton.style.display = "none";
                    toggleControlsButton.textContent = "示";
                    controlsVisible = false;
                } else {
                    if (timeDisplay) timeDisplay.style.display = "inline-block";
                    if (tuaButtons) tuaButtons.style.display = "flex";
                    if (pausePlayButton) pausePlayButton.style.display = "inline-flex";
                    if (loopStart) loopStart.style.display = "inline-block";
                    if (loopEnd) loopEnd.style.display = "inline-block";
                    if (loopButton) loopButton.style.display = "inline-flex";
                    if (clearButton) clearButton.style.display = "inline-flex";
                    toggleControlsButton.textContent = "藏";
                    controlsVisible = true;
                }
            };
        }

        if (audioPlayer) {
            audioPlayer.onpause = audioPlayer.onended = function() {
                if (pausePlayButton) pausePlayButton.textContent = "播";
            };
        }

        // Xử lý chế độ từ vựng
        const vocabAudio = document.getElementById('vocabAudio');
        const correctAudio = document.getElementById('correctAudio');
        const wrongAudio = document.getElementById('wrongAudio');
        const vocabIndicator = document.getElementById('vocabIndicator');
        const sentenceNumber = document.getElementById('sentenceNumber');
        const prevBtn = document.getElementById('prevBtn');
        const nextBtn = document.getElementById('nextBtn');
        const replayBtn = document.getElementById('replayBtn');
        const showHideBtn = document.getElementById('showHideBtn');
        const vocabOptionsContainer = document.getElementById('vocabOptionsContainer');

        let currentIndex = 0;
        let showAnswer = true;
        let isPlaying = false;

        function shuffleArray(array) {
            const shuffled = [...array];
            for (let i = shuffled.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];
            }
            return shuffled;
        }

        function updateVocabDisplay() {
            if (sentenceNumber) sentenceNumber.value = currentIndex + 1;
            if (vocabIndicator) {
                vocabIndicator.style.background = '#ffffe0';
                vocabIndicator.innerHTML = showAnswer ? `
                    <div style="font-size: 20px; font-weight: normal; color: #38761d;">${sentences[currentIndex].translation}</div>
                ` : '';
            }
            updateVocabOptions();
            playCurrentSentence();
        }

        function updateVocabOptions() {
            if (vocabOptionsContainer) {
                vocabOptionsContainer.innerHTML = '';
                const shuffledOptions = shuffleArray(sentences[currentIndex].options);
                shuffledOptions.forEach(option => {
                    const btn = document.createElement('button');
                    btn.className = 'optionBtn';
                    btn.textContent = option;
                    btn.onclick = () => checkVocabAnswer(option);
                    vocabOptionsContainer.appendChild(btn);
                });
            }
        }

        function playCurrentSentence() {
            if (isPlaying) vocabAudio.pause();
            [prevBtn, nextBtn, replayBtn, showHideBtn].forEach(btn => btn && btn.classList.add('disabled'));
            if (sentenceNumber) sentenceNumber.disabled = true;
            isPlaying = true;
            vocabAudio.src = sentences[currentIndex].audioFile;
            vocabAudio.currentTime = sentences[currentIndex].start;
            vocabAudio.play().catch(error => {
                console.error('Audio playback failed:', error);
                alert('Vui lòng nhấn nút “再听一遍” để phát âm thanh.');
                [prevBtn, nextBtn, replayBtn, showHideBtn].forEach(btn => btn && btn.classList.remove('disabled'));
                if (sentenceNumber) sentenceNumber.disabled = false;
                isPlaying = false;
            });

            vocabAudio.ontimeupdate = () => {
                if (vocabAudio.currentTime >= sentences[currentIndex].end) {
                    vocabAudio.pause();
                    vocabAudio.ontimeupdate = null;
                    [prevBtn, nextBtn, replayBtn, showHideBtn].forEach(btn => btn && btn.classList.remove('disabled'));
                    if (sentenceNumber) sentenceNumber.disabled = false;
                    isPlaying = false;
                }
            };
        }

        function moveSentence(direction) {
            currentIndex = (currentIndex + direction + sentences.length) % sentences.length;
            updateVocabDisplay();
        }

        function checkVocabAnswer(selectedAnswer) {
            const correctAnswer = sentences[currentIndex].correctAnswer;
            const optionButtons = vocabOptionsContainer.getElementsByClassName('optionBtn');

            for (let btn of optionButtons) {
                btn.classList.remove('correct', 'wrong');
                if (btn.textContent === selectedAnswer) {
                    if (selectedAnswer === correctAnswer) {
                        vocabIndicator.style.background = '#B7D7AA';
                        btn.classList.add('correct');
                        correctAudio.play().catch(error => console.error('Correct audio playback failed:', error));
                        correctAudio.onended = () => {
                            setTimeout(() => moveSentence(1), 200);
                        };
                    } else {
                        vocabIndicator.style.background = '#CE6D5E';
                        btn.classList.add('wrong');
                        wrongAudio.play().catch(error => console.error('Wrong audio playback failed:', error));
                        wrongAudio.onended = null;
                    }
                }
            }
        }

        if (prevBtn) {
            prevBtn.onclick = () => {
                if (!isPlaying) moveSentence(-1);
            };
        }

        if (nextBtn) {
            nextBtn.onclick = () => {
                if (!isPlaying) moveSentence(1);
            };
        }

        if (replayBtn) {
            replayBtn.onclick = () => {
                if (!isPlaying) playCurrentSentence();
            };
        }

        if (showHideBtn) {
            showHideBtn.onclick = () => {
                if (!isPlaying) {
                    showAnswer = !showAnswer;
                    showHideBtn.classList.toggle('active-mode');
                    updateVocabDisplay();
                }
            };
        }

        if (sentenceNumber) {
            sentenceNumber.onchange = () => {
                if (!isPlaying) {
                    const num = parseInt(sentenceNumber.value) - 1;
                    if (!isNaN(num) && num >= 0 && num < sentences.length) {
                        currentIndex = num;
                        updateVocabDisplay();
                    } else {
                        alert(`输入范围： 1 到 ${sentences.length}`);
                        updateVocabDisplay();
                    }
                }
            };

            sentenceNumber.onkeydown = (e) => {
                if (!isPlaying) {
                    if (e.key === 'ArrowLeft') moveSentence(-1);
                    if (e.key === 'ArrowRight') moveSentence(1);
                }
            };
        }

        function initVocab() {
            currentIndex = 0;
            showAnswer = true;
            isPlaying = false;
            updateVocabDisplay();
        }

        // Xử lý câu hỏi
        let contentScrollPosition = 0;
        let quizScrollPosition = 0;
        let vocabScrollPosition = 0;
        let userSelections = {};
        let isSubmitted = false;

        function loadQuiz() {
            const questionsDiv = document.getElementById('questions');
            if (questionsDiv) {
                questionsDiv.innerHTML = '';
                quizData.forEach((item, index) => {
                    const questionDiv = document.createElement('div');
                    questionDiv.className = 'question';
                    const questionTitle = document.createElement('h3');
                    questionTitle.textContent = `Câu ${index + 1}: ${item.question}`;
                    questionDiv.appendChild(questionTitle);

                    const optionsDiv = document.createElement('div');
                    optionsDiv.className = 'options';
                    item.options.forEach(option => {
                        const label = document.createElement('label');
                        const isChecked = userSelections[`question${index}`] === option ? 'checked' : '';
                        label.innerHTML = `
                            <input type="radio" name="question${index}" value="${option}" ${isChecked}>
                            ${option}
                        `;
                        optionsDiv.appendChild(label);
                    });

                    questionDiv.appendChild(optionsDiv);
                    questionsDiv.appendChild(questionDiv);
                });
                window.scrollTo(0, quizScrollPosition);
            }
        }

        function saveSelections() {
            quizData.forEach((_, index) => {
                const selected = document.querySelector(`input[name="question${index}"]:checked`);
                if (selected) {
                    userSelections[`question${index}`] = selected.value;
                }
            });
        }

        function checkAnswers() {
            let score = 0;
            const total = quizData.length;
            let wrongAnswers = [];
            quizData.forEach((item, index) => {
                const selected = document.querySelector(`input[name="question${index}"]:checked`);
                if (selected) {
                    if (selected.value === item.correct) {
                        score++;
                    } else {
                        wrongAnswers.push({
                            question: item.question,
                            selected: selected.value,
                            correct: item.correct
                        });
                    }
                } else {
                    wrongAnswers.push({
                        question: item.question,
                        selected: "未选择",
                        correct: item.correct
                    });
                }
            });

            const resultDiv = document.getElementById('result');
            if (resultDiv) {
                resultDiv.style.display = 'block';
                resultDiv.innerHTML = `
                    <h3>YD-
BANTOI
-结果: ${score}/${total} 答案正确</h3>
                    <p>比例: ${(score/total * 100).toFixed(2)}%</p>
                `;
                if (wrongAnswers.length > 0) {
                    resultDiv.innerHTML += '<h4>错误答案:</h4>';
                    wrongAnswers.forEach((wrong, index) => {
                        resultDiv.innerHTML += `
                            <div class="wrong-answer">
                                Câu ${quizData.findIndex(q => q.question === wrong.question) + 1}: ${wrong.question}<br>
                                你的选择: ${wrong.selected} - 正确答案: ${wrong.correct}
                            </div>
                        `;
                    });
                } else {
                    resultDiv.innerHTML += '<p>回答正确所有问题</p>';
                }
                resultDiv.scrollIntoView({ behavior: 'smooth' });
                isSubmitted = true;
            }
        }

        // Xử lý chế độ hiển thị
        const contentModeButton = document.getElementById('contentMode');
        const quizModeButton = document.getElementById('quizMode');
        const vocabModeButton = document.getElementById('vocabMode');
        const contentContainer = document.getElementById('contentContainer');
        const quizContainer = document.getElementById('quizContainer');
        const vocabContainer = document.getElementById('vocabContainer');
        const vocabControls = document.getElementById('vocabControls');

        if (contentModeButton) {
            contentModeButton.addEventListener('click', () => {
                quizScrollPosition = window.scrollY;
                vocabScrollPosition = window.scrollY;
                saveSelections();
                contentContainer.style.display = 'block';
                quizContainer.style.display = 'none';
                vocabContainer.style.display = 'none';
                vocabControls.style.display = 'none';
                contentModeButton.classList.add('active');
                quizModeButton.classList.remove('active');
                vocabModeButton.classList.remove('active');
                floatingControls.style.display = 'block';
                renderText();
                renderImage();
                window.scrollTo(0, contentScrollPosition);
            });
        }

        if (quizModeButton) {
            quizModeButton.addEventListener('click', () => {
                contentScrollPosition = window.scrollY;
                vocabScrollPosition = window.scrollY;
                saveSelections();
                contentContainer.style.display = 'none';
                quizContainer.style.display = 'block';
                vocabContainer.style.display = 'none';
                vocabControls.style.display = 'none';
                quizModeButton.classList.add('active');
                contentModeButton.classList.remove('active');
                vocabModeButton.classList.remove('active');
                floatingControls.style.display = 'none';
                if (isSubmitted) {
                    userSelections = {};
                    isSubmitted = false;
                }
                loadQuiz();
            });
        }

        if (vocabModeButton) {
            vocabModeButton.addEventListener('click', () => {
                contentScrollPosition = window.scrollY;
                quizScrollPosition = window.scrollY;
                saveSelections();
                contentContainer.style.display = 'none';
                quizContainer.style.display = 'none';
                vocabContainer.style.display = 'block';
                vocabControls.style.display = 'block';
                vocabModeButton.classList.add('active');
                contentModeButton.classList.remove('active');
                quizModeButton.classList.remove('active');
                floatingControls.style.display = 'none';
                initVocab();
                window.scrollTo(0, vocabScrollPosition);
            });
        }

        // Khởi tạo
        document.addEventListener('DOMContentLoaded', () => {
            renderText();
            renderImage();
            contentContainer.style.display = 'block';
            quizContainer.style.display = 'none';
            vocabContainer.style.display = 'none';
            vocabControls.style.display = 'none';
        });
    </script>
</body>
</html>
